42. Create and Understand Blazor Project Structure

-- NavMenu.razor --

-> add NavBars	: Login		, Register	, Authors	, Books
-> add icons	: oi-globe	, oi-book	, oi-plus	, oi-list-rich	

﻿44. Setup HTTP Client And Service Repositories

-- BookStore_UI --

Create folders:
-> Services		: BaseRepository
-> Contracts	: IBaseRepository
-> Static		: EndPoints


-- EndPoint.cs --
-> create endpoints for : BaseUrl, AuthorUrl, BookUrl, LoginUrl, RegisterUrl

-- IBaseRepository.cs --

Task<IList<T>>	GetAll(string url)
Task<T>			GetbyId(string url, int id) 
Task<bool>		Create(string url, T obj)
Task<bool>		Delete(string url, int id)
Task<T>			Update(string url, int id, T obj) 


-- BaseRepository.cs --
-> GetAll(), GetbyId(), Create(), Update(), Delete()


45. Setup User Registration API Endpoint

-- BookStore-API -> DTOs --

Validation: UserDTOs 


-- Controllers -> AuthorController.cs --

-> add [Route] to Actions that have the same Verbs so we will not have conflicts

[Route("login")]
[Route("register")]

[HttpPost]
-> add Route["register"]
-> ProducesResponseType : 200, 500
-> Register([FromBody] UserDTO userDTO)
    -> location 
    -> put all in a try catch block
    -> new IdentityUser() { UserName = userName };
    -> var userCreated = await _userManager.CreateAsync(newUser);
    -> check if the creation is success, if not put userCreated.Error in a foreach and diplay them 
    -> return ok()

-> add documentation to the Action methods


46. Setup User Registration Form

-- BookStore_UI --

-> add RegisterEndpoint : RegisterUrl = $"{BaseUrl}/Users/Register/"

-> Models:	RegisterModel.cs	(UserName, Password, ConfirmedPassword)
			LoginModel.cs		(UserName, Password)

[Required]      : UserName, Password, ConfirmedPassword
[Diplay]        : UserName
[StringLength]  : Password
[Compare]       : ComparePassword


Services    : IAuthenticationRepository.cs (Register)
Contracts   : AuthenticationRepository.cs  (Register)


-- AuthenticationRepository.cs --

-> AuthentificationRepository : BaseRepository<RegisterModel>, IAuthentificationRepository
-> add ctor so can be initialize in the base class


-- Pages -> Users -> Register.razor --

UI:    

inject IAuthorrepository _authorRepo
inject NavigationManager navManager


-> add card : card-title 
			  display msg if registration failed
			  card-body  -> <EditForm>	-> 3 <div> : <label>, <InputText>, <ValidationMessage For="">
										-> <button type="submit">
										-> UserName, Password, ConfirmedPassword	

@code: 

RegisterModel registerModel = new();
bool errorRegister = false;

private void HandleRegistration()
{
    var isSuccess = await _authorRepo.Register(registerModel);
    if(isSuccess)
    {
        navManager.NavigateTo("/");
    }
    else
    {   
        errorRegister= true;
    }
}


47. Setup User Login - Extend Blazor Authentication Provider

Static -> LoginUrl          
Models -> LoginModel.cs     : string UserName, string Password
       -> TokenResponse.cs  : string Token

-> install LocalStorage, Tokens.JWT

-- Startup.cs -

services.

